<?xml version="1.0" encoding="iso-8859-1"?>
<!--
\brief Prepare the necessary resources from JS kernel for setup 

\details
This buildfile provides the necessary resources of the scheduler kernel to build a setup. It based on the result of running dependency:copy and
dependency:copy-dependencies.

The main target of this build (setup.platform) is called by maven via the pom.xml in this directory. The build is not able
to run without maven integration.

\version 1.0
\date 2011-06-21
-->
<project name="com.sos.scheduler.setup.prepare" basedir=".">

    <property name="source.dir" value="${basedir}/target/dependency"/>
    <property name="target.dir" value="${basedir}/target/setup"/>

    <target name="purge.local">
    	<delete dir="${settings.localRepository}/com/sos/scheduler/enginedoc" />
    </target>

    <target name="setup.platform" depends="-init, -unzip, -versioninfo"
            description="platform specific setup preparation">
        <echo message="DONE !!"/>
    </target>

    <target name="-init" description="initialize the platform specific settings">
        <echo message="local maven repository in ${settings.localRepository}"/>
        <echo message="target folder is ${target.dir}"/>
    </target>

    <target name="-unzip" description="unzip the necessary binary files (except the jars)">
        <unzip dest="${target.dir}">
            <fileset dir="${source.dir}">
                <include name="enginedoc-kernel-${setup.version}.jar"/>
            </fileset>
        </unzip>
    </target>

    <target name="-versioninfo" description="creates a file with version information">
        <propertyfile file="${target.dir}/.version-enginedoc" comment="build information">
            <entry key="version" type="string" value="${setup.version}"/>
            <entry key="builddate" type="date" value="now" pattern="yyyy-MM-dd HH:mm:ss"/>
        </propertyfile>
    </target>
</project>
