<?xml version="1.0"?>
<?xml-stylesheet href="../scheduler.xsl" type="text/xsl"?>

<!--$Id: process_order.xml 12214 2006-08-27 14:34:29Z jz $-->

<description
    title               = "Auftragsgesteuerte &lt;process&gt;-Jobs"
    base_dir            = "../"
    parent_page         = "index.xml"
    author              = "$Author: jz $"
    date                = "$Date: 2006-08-27 16:34:29 +0200 (Sun, 27 Aug 2006) $"
>
    <p>
        Weil <scheduler_element name="process"/>-Jobs kein <scheduler_method class="Job_impl" method="spooler_process"/> kennen,
        wird der Job für jeden Auftrag erneut gestartet.
    </p>

    <p>
        <scheduler_element name="process"/> in <scheduler_element name="job" attribute="order" value="yes"/>
        lässt den Job für jeden Auftrag einzeln starten.
        Der Job kann auch mit <scheduler_element name="start_job"/>, ohne Auftrag, gestartet werden (aber siehe <code>&lt;environment></code>).
    </p>

        <!--li>
            Der Abruf einer Variablen mit der Schreibweise <code>${…}</code> wird erweitert:
            <code>${spooler_task.</code><i>property</i><code>}</code> liefert den Wert der Eigenschaft <i>property</i>
            des Objekts <scheduler_method class="Task" object="spooler_task"/>.
            Auch <code>${spooler_task.order.params("</code><i>name</i><code>")}</code> ist möglich.
        </li-->
    <p>
        <scheduler_element name="environment"/> wird um ein Element erweitert,
        das einzelne Auftragsparameter als Umgebungsvariablen übernimmt.
    </p>
    
    <pre>&lt;environment>
    &lt;variable name="MY_PATH" from="order" from_name="scheduler_file.path"/>
&lt;/environment></pre>

    <p>
        Alle Auftragsparameter könnten so übernommen werden:
    </p>
    <pre>&lt;environment>
    &lt;copy_params prefix="scheduler_order_" from="order"/>
&lt;/environment></pre>
    <p>
        Die Großschreibung der Namen der Auftragsparameter bleibt erhalten.
        Das Attribut <code>prefix=</code> lässt jede Umgebungsvariable mit dem Präfix beginnen.
        Es sollte angegeben werden.
    </p>
    <p>
        Es ist ein Fehler (<scheduler_message code="SCHEDULER-329"/>), 
        wenn bei <code>&lt;copy_param" from="order"/></code>
        oder <scheduler_element name="copy_params" attribute="from" value="order"/>
        der Job ohne Auftrag gestartet wird.
        <i>So haben wir es für <scheduler_element name="commands" attribute="on_exit_code"/> implementiert;
        sollten wir stattdessen in beiden Fällen nur eine Warnung ausgeben?
        Das wäre nur für den Start des Jobs ohne Auftrag.</i>
    </p>

    <p>
        
    </p>                                                                      

</description>
